---
const { id = "popup", title = "Popup Title", message = "ข้อความ popup", delay = 1000 } = Astro.props;
---

<div id={id} class="popup hidden">
  <div class="popup-content">
    <span class="close-btn">&times;</span>
    <h2>{title}</h2>
    <p>{message}</p>
  </div>
</div>

<style>
.hidden { display: none; }
.popup {
  position: fixed; top:0; left:0; width:100%; height:100%;
  background: rgba(0,0,0,0.5); display:flex; justify-content:center; align-items:center;
  z-index:1000; opacity:0; transition: opacity 0.3s ease;
}
.popup.show { display:flex; opacity:1; }
.popup-content {
  background:white; padding:20px; border-radius:10px; max-width:400px;
  text-align:center; position:relative; transform:scale(0.8); transition: transform 0.3s ease;
}
.popup.show .popup-content { transform:scale(1); }
.close-btn { position:absolute; top:10px; right:15px; font-size:24px; cursor:pointer; }
</style>

<script type="module" client:load>
  (() => {
    const popup = document.getElementById("{id}");
    const closeBtn = popup.querySelector(".close-btn");

    setTimeout(() => {
      popup.classList.add("show");
      popup.classList.remove("hidden");
    }, Number({delay}));

    closeBtn.addEventListener("click", () => {
      popup.classList.remove("show");
      setTimeout(() => popup.classList.add("hidden"), 300);
    });

    popup.addEventListener("click", (e) => {
      if (e.target === popup) {
        popup.classList.remove("show");
        setTimeout(() => popup.classList.add("hidden"), 300);
      }
    });
  })();
</script>
